{
    "logging"   : { "file" : true, "driver-station" : true, "dashboard" : true, "level" : "trace" },
    "robot"     : {
        "hardware" : {
            "motors": {
                "front-left-wheel":  [ { "hwmap": "frontLeft", "direction": "reverse" } ],
                "front-right-wheel": [ { "hwmap": "frontRight" } ],
                "back-left-wheel":   [ { "hwmap": "backLeft", "direction": "reverse" } ],
                "back-right-wheel":  [ { "hwmap": "backRight",  "direction": "reverse" } ],
                "intake-slides": [ ],
                "outtake-slides": [ ]
            },
            "servos" : {
                "intake-elbow-pitch":  [ ],
                "intake-wrist-roll":   [ ],
                "intake-claw":         [ ],
                "intake-arm-pitch":    [ ],
                "outtake-wrist-roll":  [ ],
                "outtake-claw":        [ ],
                "outtake-elbow-pitch": [ ]
            },
            "localizers": {
                "otos": {
                    "hwmap"             : "otos",
                    "x-offset"          : 0,
                    "y-offset"          : 3.292053703248031,
                    "heading-offset"    : 0,
                    "heading-ratio"     : 0.9964,
                    "position-ratio"    : 1.0
                }
            },
            "imus": {
                "built-in": {
                    "hwmap"             : "imu",
                    "logo-direction"    : "up",
                    "usb-direction"     : "backward"
                }
            }
        },
        "subsystems" : {
            "intake-arm" : {
                "type" : "intake-arm",
                "claw" : {
                    "type"      : "toggle-actuator",
                    "short"     : "IN CLW",
                    "toggle"    : ["open", "closed"],
                    "servo"     : "intake-claw",
                    "positions" : {
                        "open"         : 1.0,
                        "microrelease" : 0.9,
                        "closed"       : 0.62
                    }
                },
                "wrist" : {
                    "type"      : "toggle-actuator",
                    "short"     : "IN WRS",
                    "toggle"    : ["0", "180"],
                    "servo"     : "intake-wrist-roll",
                    "positions" : {
                        "0"     : 0.405,
                        "180"   : 0.675
                    }
                },
                "elbow" : {
                    "type"      : "actuator",
                    "short"     : "IN ELB",
                    "servo"     : "intake-elbow-pitch",
                    "positions" : {
                        "transfer"  : 0.15,
                        "grab"      : 0.66,
                        "off"       : 0.66,
                        "drone"     : 0.68,
                        "over-sub"  : 0.71
                    }
                },
                "arm" : {
                    "type"      : "actuator",
                    "short"     : "IN ARM",
                    "servo"     : "intake-arm-pitch",
                    "positions" : {
                        "grab"      : 0.39,
                        "drone"     : 0.44,
                        "over-sub"  : 0.6,
                        "transfer"  : 0.97,
                        "off"       : 1.0
                    }
                }
            },
            "intake-slides" : {
                "type"      : "default-slides",
                "short"     : "IN SLD",
                "motor"     : "intake-slides",
                "positions" : {
                    "min"               : 0,
                    "transfer-exchange" : 167,
                    "retracted"         : 250,
                    "autonomous-sample" : 280,
                    "transfer-away"     : 300,
                    "max"               : 315
                },
                "powers": {
                    "set-position"  : 1.0,
                    "hold-position" : 0.3
                }
            },
            "outtake-arm" : {
                "type" : "outtake-arm",
                "claw" : {
                    "type"      : "toggle-actuator",
                    "short"     : "OUT CLW",
                    "toggle"    : ["open", "closed"],
                    "servo"     : "outtake-claw",
                    "positions" : {
                        "open"         : 0.36,
                        "closed"       : 0.73,
                        "ultraclosed"  : 0.75
                    }
                },
                "wrist" : {
                    "type"      : "toggle-actuator",
                    "short"     : "OUT WRS",
                    "toggle"    : ["0", "180"],
                    "servo"     : "outtake-wrist-roll",
                    "positions" : {
                        "0"     : 0.135,
                        "180"   : 0.42
                    }
                },
                "elbow" : {
                    "type"      : "actuator",
                    "short"     : "OUT ELB",
                    "servo"     : "outtake-elbow-pitch",
                    "positions" : {
                        "autonomous-specimen-behind" : 0.011,
                        "autonomous-specimen-ahead"  : 0.025,
                        "drop-sample"                : 0.05,
                        "off"                        : 0.08,
                        "vertical"                   : 0.085,
                        "transfer"                   : 0.11
                    }
                }
            },
            "outtake-slides" : {
                "type"  : "default-slides",
                "short" : "OUT SLD",
                "motor" : "outtake-slides",
                "positions": {
                    "min"                                   : 0,
                    "transfer"                              : 0,
                    "autonomous-specimen-submersible-under" : 690,
                    "autonomous-specimen-submersible-over"  : 870,
                    "autonomous-sample-ascend"              : 710,
                    "retracted"                             : 1300,
                    "max"                                   : 3726
                },
                "powers": {
                    "set-position"  : 1.0,
                    "hold-position" : 0.3
                }
            },
            "drive-train" : {
                "type"   : "mecanum-drive",
                "short"  : "DRV",
                "motors" : {
                    "front-left-wheel":  "front-left-wheel",
                    "front-right-wheel": "front-right-wheel",
                    "back-left-wheel":   "back-left-wheel",
                    "back-right-wheel":  "back-right-wheel"
                },
                "localizer" : "otos",
                "reference" : "robot-centric",
                "follower"   : {
                    "mass"       : 8,
                    "max-power"  : 1.0,
                    "x-movement" : 53.8394958015502,
                    "y-movement" : 51.65520615465059,
                    "forward-0-power-acceleration" : -20.654845691222988,
                    "strafe-0-power-acceleration" : -21.114626907838524,
                    "translation-pidf" : { "p" : 0.5 , "i" : 0 , "d" : 0.02,  "f" : 0 },
                    "translation-pidf-feed-forward" : 0.015,
                    "heading-pidf" : { "p" : 0.8, "i" : 0.0 , "d" : 0.01,  "f" : 0 },
                    "heading-pidf-feed-forward" : 0.01
                }
            }
        }
    },
    "control"   : {
        "controllers": {
            "drive": {
                "axes" : {
                    "left_stick_x"  : { "deadzone": 0.1 },
                    "left_stick_y"  : { "deadzone": 0.1 },
                    "right_stick_x" : { "deadzone": 0.1 }
                }
            }
        },
        "commands": [
            {  "action": "drive",
                "1": { "scale": 1.1, "input": "left_stick_x", "controller" : "drive" },
                "2": { "scale": -1.0, "input": "left_stick_y", "controller" : "drive" },
                "3": { "scale": 1.0, "input": "right_stick_x", "controller" : "drive" }
            },
            { "action": "tuneDriveSpeed", "1": 0.45, "condition": { "button": "left_bumper", "state": "pressed", "controller" : "drive" } },
            { "action": "tuneDriveSpeed", "1": 1.0, "condition": { "button": "left_bumper", "state": "notPressed", "controller" : "drive" } },

            { "action": "powerOuttakeSlides", "1": 0.9,  "condition": { "button": "left_bumper", "state": "pressed", "controller" : "mechanisms"} },
            { "action": "powerOuttakeSlides", "1": -0.7, "condition": { "button": "right_bumper", "state": "pressed", "controller" : "mechanisms"}},
            { "action": "powerOuttakeSlides", "1": 0.0,  "condition": { "and": [
                { "button": "right_bumper","state": "notPressed", "controller" : "mechanisms"},
                { "button": "left_bumper", "state": "notPressed", "controller" : "mechanisms"}
            ]}},
            { "action": "positionOuttakeSlides", "1": "transfer", "condition": { "button": "right_stick_button", "state": "pressedOnce", "controller" : "mechanisms" }},

            { "action": "powerIntakeSlides", "1": { "scale": 0.9, "input": "left_trigger", "controller" : "mechanisms" },   "condition" : { "trigger" : "left_trigger", "threshold" : 0.01, "operation" : "greaterThan", "controller" : "mechanisms" }},
            { "action": "powerIntakeSlides", "1": { "scale": -0.7, "input": "right_trigger", "controller" : "mechanisms" }, "condition" : { "trigger" : "right_trigger", "threshold" : 0.01, "operation" : "greaterThan", "controller" : "mechanisms" }},
            { "action": "powerIntakeSlides", "1": { "scale": 0.0, "input": "right_trigger", "controller" : "mechanisms" },  "condition" : { "and" : [
                { "trigger" : "right_trigger", "threshold" : 0.01, "operation" : "lesserThan", "controller" : "mechanisms" },
                { "trigger" : "left_trigger",  "threshold" : 0.01, "operation" : "lesserThan", "controller" : "mechanisms" }
            ]}},

            { "action": "moveOuttakeArm",  "1": "down", "condition": { "button": "a", "state": "pressedOnce", "controller" : "mechanisms" }},
            { "action": "moveOuttakeArm",  "1": "up",   "condition": { "button": "y", "state": "pressedOnce", "controller" : "mechanisms" }},

            { "action": "toggleIntakeClaw",                  "condition": { "button": "dpad_left",  "state": "pressedOnce", "controller" : "mechanisms" } },
            { "action": "moveIntakeArm",  "1": "up",         "condition": { "button": "dpad_down",  "state": "pressedOnce", "controller" : "mechanisms" }},
            { "action": "moveIntakeArm",  "1": "down",       "condition": { "button": "dpad_up",    "state": "pressedOnce", "controller" : "mechanisms" }},
            { "action": "toggleIntakeWrist",                 "condition": { "button": "dpad_right", "state": "pressedOnce", "controller" : "mechanisms" }},

            { "action": "transfer", "condition": { "button": "b", "state": "pressedOnce", "controller" : "mechanisms" }}

        ]
    }
}
