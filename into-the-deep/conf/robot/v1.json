{
    "logging"   : { "filename" : true, "driver-station" : true, "dashboard" : true, "level" : "info" },
    "robot"     : {
        "hardware" : {
            "motors": {
                "front-left-wheel":  [ { "hwmap": "frontLeft" } ],
                "front-right-wheel": [ { "hwmap": "frontRight", "direction": "reverse" } ],
                "back-left-wheel":   [ { "hwmap": "backLeft" } ],
                "back-right-wheel":  [ { "hwmap": "backRight",  "direction": "reverse" } ],
                "intake-slides": [
                    { "hwmap": "intakeSlidesLeft" },
                    { "hwmap": "intakeSlidesRight", "direction": "reverse"}
                ],
                "outtake-slides": [
                    { "hwmap": "outtakeSlidesLeft", "direction": "reverse" },
                    { "hwmap": "outtakeSlidesRight" }
                ]
            },
            "servos" : {
                "intake-elbow-pitch": [ { "hwmap": "intakeElbowPitch" } ],
                "intake-wrist-roll":  [ { "hwmap": "intakeWristRoll" } ],
                "intake-claw":        [ { "hwmap": "intakeClaw" } ],
                "outtake-wrist-roll": [ { "hwmap": "outtakeWristRoll" } ],
                "outtake-claw":       [ { "hwmap": "outtakeClaw" } ],
                "intake-arm-pitch": [
                    { "hwmap": "intakeArmPitchLeft" },
                    { "hwmap": "intakeArmPitchRight", "reverse" : true }
                ],
                "outtake-elbow-pitch": [
                    { "hwmap": "outtakeElbowPitchLeft" },
                    { "hwmap": "outtakeElbowPitchRight", "reverse" : true }
                ]
            },
            "odometers": {
                "otos": {
                    "hwmap": "sensor_otos",
                    "heading-offset" : 0.03,
                    "x-offset" : 0.4566,
                    "y-offset" : -3.5984,
                    "heading-ratio" : 0.9964,
                    "position-ratio" : 1.0
                }
            },
            "imus": {
                "built-in": {
                    "hwmap": "imu",
                    "logo-direction": "up",
                    "usb-direction": "right"
                }
            }
        },
        "subsystems" : {
            "outtake-slides" : {
                "type" : "default-slides",
                "motor" : "outtake-slides",
                "positions": {
                    "min": 0,
                    "retracted": 1300,
                    "max": 3726,
                    "transfer": 0,
                    "autonomous-sample-ascend" : 710,
                    "autonomous-specimen-submersible-under" : 690,
                    "autonomous-specimen-submersible-over" : 870
                },
                "powers": {
                    "set-position": 1.0,
                    "hold-position": 0.3,
                    "stop": 0
                }
            },
            "drive-train" : {
                "type" : "mechanum-drive",
                "motors" : {
                    "front-left-wheel":  "front-left-wheel",
                    "front-right-wheel": "front-right-wheel",
                    "back-left-wheel":   "back-left-wheel",
                    "back-right-wheel":  "back-right-wheel"
                },
                "odometers" : {
                    "otos" : {
                        "hwmap": "sensor_otos",
                        "heading-offset" : 0.03,
                        "x-offset" : 0.4566,
                        "y-offset" : -3.5984,
                        "heading-ratio" : 0.9964,
                        "position-ratio" : 1.0
                    }
                },
                "physics" : {
                    "in-per-tick"               : 1,
                    "lat-in-per-tick"           : 0.7118231519430893,
                    "track-width-ticks"         : 15.134752358682695,
                    "max-wheel-velocity"        : 50,
                    "min-profile-acceleration"  : -30,
                    "max-profile-acceleration"  : 50,
                    "max-heading-velocity"      : 3.14159265,
                    "max-heading-acceleration"  : 3.14159265
                },
                "pidf" :{
                    "ks"                    : 0.6369655063611788,
                    "kv"                    : 0.20224958397771445,
                    "ka"                    : 0.05,
                    "x-gain"                : 4.0,
                    "x-velocity-gain"       : 0.0,
                    "y-gain"                : 4.0,
                    "y-velocity-gain"       : 0.0,
                    "heading-gain"          : 4.0,
                    "heading-velocity-gain" : 0.0
                }
            }
        }
    },
    "control"   : {

        "controllers": {
            "drive": {
                "axes" : {
                    "left_stick_x"  : { "deadzone": 0.1 },
                    "left_stick_y"  : { "deadzone": 0.1 },
                    "right_stick_x" : { "deadzone": 0.1 }
                }
            }
        },
        "commands": [

            {  "action": "drive",
                "x": { "scale": 1.1, "input": "left_stick_x", "controller" : "drive" },
                "y": { "scale": -1.0, "input": "left_stick_y", "controller" : "drive" },
                "rotation": { "scale": 1.0, "input": "right_stick_x", "controller" : "drive" }
            },
            { "action": "tuneDriveSpeed", "multiplier": 0.45, "condition": { "button": "left_bumper", "state": "pressed", "controller" : "drive" } },
            { "action": "tuneDriveSpeed", "multiplier": 1.0, "condition": { "button": "left_bumper", "state": "notPressed", "controller" : "drive" } },

            { "action": "powerOuttakeSlides", "power": 0.9,  "condition": { "button": "left_bumper", "state": "pressedOnce", "controller" : "mechanisms"} },
            { "action": "powerOuttakeSlides", "power": -0.7, "condition": { "button": "right_bumper", "state": "pressedOnce", "controller" : "mechanisms"}},
            { "action": "powerOuttakeSlides", "power": 0.0,  "condition": { "and": [
                { "button": "right_bumper","state": "notPressed", "controller" : "mechanisms"},
                { "button": "left_bumper", "state": "notPressed", "controller" : "mechanisms"}
            ]}},
            { "action": "positionOuttakeSlides", "position": "transfer", "condition": { "button": "right_stick_button", "state": "pressedOnce", "controller" : "mechanisms" }},

            { "action": "powerIntakeSlides", "power": { "scale": 0.9, "input": "left_trigger" },   "condition" : { "trigger" : "left_trigger", "threshold" : 0.01, "operation" : "greaterThan", "controller" : "mechanisms" }},
            { "action": "powerIntakeSlides", "power": { "scale": -0.7, "input": "right_trigger" }, "condition" : { "trigger" : "right_trigger", "threshold" : 0.01, "operation" : "greaterThan", "controller" : "mechanisms" }},
            { "action": "powerIntakeSlides", "power": { "scale": 0.0, "input": "right_trigger" },  "condition" : { "and" : [
                { "trigger" : "right_trigger", "threshold" : 0.01, "operation" : "lesserThan", "controller" : "mechanisms" },
                { "trigger" : "left_trigger",  "threshold" : 0.01, "operation" : "lesserThan", "controller" : "mechanisms" }
            ]}},

            { "action": "toggleOuttakeClaw",                    "condition": { "button": "x", "state": "pressedOnce", "controller" : "mechanisms" } },
            { "action": "moveOuttakeArm",  "direction": "down", "condition": { "button": "a", "state": "pressedOnce", "controller" : "mechanisms" }},
            { "action": "moveOuttakeArm",  "direction": "up",   "condition": { "button": "y", "state": "pressedOnce", "controller" : "mechanisms" }},

            { "action": "toggleIntakeClaw",                     "condition": { "button": "dpad_left",  "state": "pressedOnce", "controller" : "mechanisms" } },
            { "action": "moveIntakeArm",  "direction": "down",  "condition": { "button": "dpad_down",  "state": "pressedOnce", "controller" : "mechanisms" }},
            { "action": "moveIntakeArm",  "direction": "up",    "condition": { "button": "dpad_up",    "state": "pressedOnce", "controller" : "mechanisms" }},
            { "action": "toggleIntakeWrist",                    "condition": { "button": "dpad_right", "state": "pressedOnce", "controller" : "mechanisms" }},

            { "action": "transfer", "condition": { "button": "b", "state": "pressedOnce", "controller" : "mechanisms" }}

        ]
    }
}
